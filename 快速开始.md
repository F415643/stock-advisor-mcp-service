# è‚¡ç¥¨å»ºè®®MCPæœåŠ¡ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ ä¸€é”®å¯åŠ¨

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. å¯åŠ¨æœåŠ¡
```bash
# æ–¹å¼1: ç›´æ¥å¯åŠ¨
python stock_advisor_server.py

# æ–¹å¼2: ä½¿ç”¨å¯åŠ¨è„šæœ¬
python start_server.py

# æ–¹å¼3: ä½¿ç”¨FastMCP CLI
fastmcp run stock_advisor_server.py
```

### 3. æµ‹è¯•æœåŠ¡
```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•
python test_client.py

# è¿è¡Œä½¿ç”¨ç¤ºä¾‹
python usage_examples.py
```

## ğŸ“± ä¸»è¦åŠŸèƒ½æ¼”ç¤º

### Aè‚¡æŸ¥è¯¢ç¤ºä¾‹
```python
# 1. æœç´¢è‚¡ç¥¨
search_result = await client.call_tool("search_stock_by_name", {"name": "å¹³å®‰é“¶è¡Œ"})

# 2. è·å–å®æ—¶è‚¡ä»·
price_info = await client.call_tool("get_stock_price", {"symbol": "000001"})

# 3. è·å–å†å²ä»·æ ¼
historical_price = await client.call_tool("get_historical_price", {
    "symbol": "000001", 
    "date": "2023-07-28"
})

# 4. è·å–è‚¡ç¥¨æ–°é—»
news = await client.call_tool("get_stock_news", {"symbol": "000001"})

# 4. ç»¼åˆåˆ†æ
analysis = await client.call_tool("get_comprehensive_analysis", {"symbol": "000001"})
```

### ğŸ”‘ API Key é›†æˆ

Alpha Vantage API Key å·²ç»é›†æˆåˆ°æœåŠ¡ä¸­ï¼ˆMMP16ZZRCJ3NKMQHï¼‰ã€‚å¦‚æœè¦ä½¿ç”¨è‡ªå·±çš„ API Keyï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

1. å¯åŠ¨æœåŠ¡å™¨æ—¶æ·»åŠ å‚æ•°ï¼š
   ```bash
   python stock_advisor_server.py --api-key YOUR_API_KEY
   ```
2. æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   ```bash
   export API_KEY=YOUR_API_KEY  # Linux/macOS
   set API_KEY=YOUR_API_KEY     # Windows PowerShell
   ```
3. æœåŠ¡å™¨å¯åŠ¨åä¼šè‡ªåŠ¨è¯»å– `args.api_key`ï¼Œå¹¶åœ¨è°ƒç”¨çœŸå® API æ—¶ä½¿ç”¨ã€‚

å½“å‰æ”¯æŒçš„ API æœåŠ¡ï¼š
- **Alpha Vantage** ï¼ˆå·²é›†æˆï¼Œæ”¯æŒå®æ—¶å’Œå†å²æ•°æ®ï¼‰
- **IEX Cloud** ï¼ˆå¯é€‰ï¼Œéœ€è¦è‡ªè¡Œæä¾› API Keyï¼‰

### ç¾è‚¡æŸ¥è¯¢ç¤ºä¾‹
```python
# è·å–è‹¹æœè‚¡ä»·
apple_price = await client.call_tool("get_stock_price", {"symbol": "AAPL"})

# æŠ•èµ„å»ºè®®
recommendation = await client.call_tool("get_investment_recommendation", {
    "symbol": "AAPL",
    "investment_amount": 10000,
    "risk_tolerance": "ä¸­"
})
```

### å¸‚åœºæ¦‚è§ˆ
```python
# çƒ­é—¨è‚¡ç¥¨
hot_stocks = await client.call_tool("get_hot_stocks", {})

# å¸‚åœºæ¦‚å†µ
market_summary = await client.read_resource("stock://market-summary")
```

## ğŸ”§ æ”¯æŒçš„åŠŸèƒ½

### å·¥å…· (Tools)
| åŠŸèƒ½ | å·¥å…·åç§° | è¯´æ˜ |
|------|----------|------|
| è‚¡ç¥¨æœç´¢ | `search_stock_by_name` | æ ¹æ®ä¸­æ–‡åç§°æœç´¢è‚¡ç¥¨ä»£ç  |
| å®æ—¶è‚¡ä»· | `get_stock_price` | è·å–Aè‚¡/ç¾è‚¡å®æ—¶ä»·æ ¼ |
| è‚¡ç¥¨æ–°é—» | `get_stock_news` | è·å–æœ€æ–°ç›¸å…³æ–°é—» |
| çƒ­é—¨è‚¡ç¥¨ | `get_hot_stocks` | è·å–å½“å‰çƒ­é—¨è‚¡ç¥¨ |
| ç»¼åˆåˆ†æ | `get_comprehensive_analysis` | ç”Ÿæˆè¯¦ç»†åˆ†ææŠ¥å‘Š |
| æŠ€æœ¯åˆ†æ | `analyze_stock` | æŠ€æœ¯é¢å’ŒåŸºæœ¬é¢åˆ†æ |
| æŠ•èµ„å»ºè®® | `get_investment_recommendation` | ä¸ªæ€§åŒ–æŠ•èµ„å»ºè®® |
| è‚¡ç¥¨æ¯”è¾ƒ | `compare_stocks` | å¤šåªè‚¡ç¥¨å¯¹æ¯” |
| æœåŠ¡çŠ¶æ€ | `get_server_status` | æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€ |

### èµ„æº (Resources)
| èµ„æº | URI | è¯´æ˜ |
|------|-----|------|
| å¸‚åœºæ¦‚å†µ | `stock://market-summary` | æ•´ä½“å¸‚åœºçŠ¶å†µ |
| è‚¡ç¥¨èµ„æ–™ | `stock://{symbol}/profile` | ç‰¹å®šè‚¡ç¥¨è¯¦ç»†èµ„æ–™ |

## ğŸŒ æ•°æ®æ¥æº

### å®æ—¶æ•°æ®æº
- **ä¸œæ–¹è´¢å¯Œ**: è‚¡ä»·ã€è´¢åŠ¡æ•°æ®ã€æ–°é—»
- **åŒèŠ±é¡º**: è‚¡ä»·ã€æŠ€æœ¯æŒ‡æ ‡
- **å¤‡ç”¨æ•°æ®**: æ¨¡æ‹Ÿæ•°æ®ï¼ˆå½“å®æ—¶æ•°æ®ä¸å¯ç”¨æ—¶ï¼‰

### æ”¯æŒçš„å¸‚åœº
- **Aè‚¡**: æ²ªæ·±äº¤æ˜“æ‰€æ‰€æœ‰è‚¡ç¥¨
- **ç¾è‚¡**: ä¸»è¦ç¾è‚¡è‚¡ç¥¨

## ğŸ“‹ å¸¸ç”¨è‚¡ç¥¨ä»£ç 

### Aè‚¡çƒ­é—¨è‚¡ç¥¨
| è‚¡ç¥¨åç§° | ä»£ç  | å¸‚åœº |
|----------|------|------|
| å¹³å®‰é“¶è¡Œ | 000001 | æ·±äº¤æ‰€ |
| ä¸‡ç§‘A | 000002 | æ·±äº¤æ‰€ |
| æ‹›å•†é“¶è¡Œ | 600036 | ä¸Šäº¤æ‰€ |
| æµ¦å‘é“¶è¡Œ | 600000 | ä¸Šäº¤æ‰€ |
| ä¸­å›½å¹³å®‰ | 601318 | ä¸Šäº¤æ‰€ |
| è´µå·èŒ…å° | 600519 | ä¸Šäº¤æ‰€ |

### ç¾è‚¡çƒ­é—¨è‚¡ç¥¨
| è‚¡ç¥¨åç§° | ä»£ç  |
|----------|------|
| è‹¹æœ | AAPL |
| å¾®è½¯ | MSFT |
| è°·æ­Œ | GOOGL |
| ç‰¹æ–¯æ‹‰ | TSLA |
| äºšé©¬é€Š | AMZN |
| è‹±ä¼Ÿè¾¾ | NVDA |

## ğŸ” ä½¿ç”¨æŠ€å·§

### 1. è‚¡ç¥¨æœç´¢
```python
# æ”¯æŒä¸­æ–‡åç§°æœç´¢
await client.call_tool("search_stock_by_name", {"name": "æ‹›å•†é“¶è¡Œ"})
await client.call_tool("search_stock_by_name", {"name": "è‹¹æœ"})
```

### 2. æ‰¹é‡æŸ¥è¯¢
```python
# æ¯”è¾ƒå¤šåªè‚¡ç¥¨
await client.call_tool("compare_stocks", {
    "symbols": ["000001", "600036", "601318", "600519"]
})
```

### 3. æŠ•èµ„å»ºè®®
```python
# æ ¹æ®é£é™©æ‰¿å—èƒ½åŠ›è·å–å»ºè®®
await client.call_tool("get_investment_recommendation", {
    "symbol": "000001",
    "investment_amount": 50000,  # æŠ•èµ„é‡‘é¢
    "risk_tolerance": "é«˜"       # é£é™©æ‰¿å—èƒ½åŠ›: ä½/ä¸­/é«˜
})
```

## ğŸ”§ åœ¨Claude Desktopä¸­ä½¿ç”¨

### 1. é…ç½®æ–‡ä»¶
å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°Claude Desktopé…ç½®æ–‡ä»¶ï¼š
```json
{
  "mcpServers": {
    "stock-advisor": {
      "command": "python",
      "args": ["path/to/stock_advisor_server.py"],
      "env": {
        "PYTHONPATH": "."
      }
    }
  }
}
```

### 2. é‡å¯Claude Desktop
é…ç½®å®Œæˆåé‡å¯Claude Desktopå³å¯ä½¿ç”¨ã€‚

### 3. ä½¿ç”¨ç¤ºä¾‹
åœ¨Claudeä¸­å¯ä»¥è¿™æ ·è¯¢é—®ï¼š
- "å¸®æˆ‘æŸ¥è¯¢å¹³å®‰é“¶è¡Œçš„è‚¡ä»·"
- "åˆ†æä¸€ä¸‹æ‹›å•†é“¶è¡Œçš„æŠ•èµ„ä»·å€¼"
- "ç»™æˆ‘æ¨èå‡ åªçƒ­é—¨è‚¡ç¥¨"
- "æ¯”è¾ƒä¸€ä¸‹èŒ…å°å’Œäº”ç²®æ¶²"

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å»¶è¿Ÿ**: å…è´¹æ•°æ®æºå¯èƒ½æœ‰15-20åˆ†é’Ÿå»¶è¿Ÿ
2. **è¯·æ±‚é™åˆ¶**: é¿å…é¢‘ç¹è¯·æ±‚ï¼Œä»¥å…è¢«é™åˆ¶è®¿é—®
3. **æŠ•èµ„é£é™©**: æ‰€æœ‰å»ºè®®ä»…ä¾›å‚è€ƒï¼ŒæŠ•èµ„éœ€è°¨æ…
4. **ç½‘ç»œè¦æ±‚**: éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥è®¿é—®æ•°æ®æº

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **"è‚¡ç¥¨ä»£ç ä¸å­˜åœ¨"**: æ£€æŸ¥è‚¡ç¥¨ä»£ç æ ¼å¼æ˜¯å¦æ­£ç¡®
2. **"è·å–æ•°æ®å¤±è´¥"**: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæ•°æ®æºçŠ¶æ€
3. **"æœåŠ¡å™¨è¿æ¥å¤±è´¥"**: ç¡®ä¿MCPæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ

### è°ƒè¯•æ–¹æ³•
```bash
# å¯ç”¨è°ƒè¯•æ¨¡å¼
python stock_advisor_server.py --debug

# æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
python -c "
import asyncio
from fastmcp import Client

async def check():
    async with Client('stock_advisor_server.py') as client:
        status = await client.call_tool('get_server_status', {})
        print(status.text)

asyncio.run(check())
"
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—è¾“å‡º
2. è¿è¡Œæµ‹è¯•å®¢æˆ·ç«¯æ£€æŸ¥åŠŸèƒ½
3. æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæ•°æ®æºçŠ¶æ€
4. æŸ¥çœ‹README.mdè·å–è¯¦ç»†æ–‡æ¡£

---

ğŸ‰ **ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹ä½¿ç”¨è‚¡ç¥¨å»ºè®®MCPæœåŠ¡äº†ï¼**